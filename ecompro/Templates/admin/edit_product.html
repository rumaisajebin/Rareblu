{% extends 'admin/admin.html' %}
{% block main %}
<div class="container">
    <form method="post" action="{% url 'edit_productperfom' %}" class="border border-dark rounded p-4"
        enctype="multipart/form-data" onsubmit="return validateForm()">
        {% csrf_token %}
        <div class="form-group">
            <label for="exampleFormControlInput1">Title</label>
            <input type="hidden" value="{{ product.id }}" name="id">
            <input value="{{product.Product_Name}}" type="text" class="form-control" id="title" name="title">
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Category</label>
            <select name="category" class="form-control" id="category">
                <option value="{{product.Category.id}}" selected>{{ product.Category.name }}</option>
                {% for category in category %}
                <option value="{{category.id}}">{{ category.name }}</option>
                {% endfor %}

            </select>
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Brand</label>
            <select name="brand" class="form-control" id="category">
                <option value="{{product.Brand.id}}" selected>{{ product.Brand.name }}</option>
                {% for brand in brand %}
                <option value="{{ brand.id }}">{{ brand.name }}</option>
                {% endfor %}

            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlFile1">Choose product image1</label>
            <input name="image1" type="file" class="form-control -file" id="exampleFormControlFile1">
        </div>
        <br>
        <div class="form-group">
            <label for="exampleFormControlFile1">Choose product image2</label>
            <input name="image2" type="file" class="form-control -file" id="exampleFormControlFile1">
        </div>
        <br>
        <div class="form-group">
            <label for="exampleFormControlFile1">Choose product image3</label>
            <input name="image3" type="file" class="form-control -file" id="exampleFormControlFile1">
        </div>
        <br>
        <div class="form-group">
            <label for="exampleFormControlFile1">Choose product image4</label>
            <input name="image4" type="file" class="form-control -file" id="exampleFormControlFile1">
        </div>

        <br>
        <div class="form-group">
            <label for="exampleFormControlTextarea1">Description</label>
            <textarea name="description" class="form-control" id="description" rows="3">{{ product.Description }}</textarea>
            <span id="descriptionError" class="text-danger"></span>
        </div>


        <div class="form-group col-md-2">
            <label for="inputZip">Price</label>
            <input value="{{ product.price }}" name="price" type="text" class="form-control" id="inputPrice">
            <span id="priceError" class="text-danger"></span>
        </div>
        <div class="form-group col-md-2">
            <label for="inputZip">Stock</label>
            <input value="{{ product.Stock }}" name="stock" type="text" class="form-control" id="inputStock">
            <span id="stockError" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>

<script>
    function validateForm() {
        var priceInput = document.getElementById('inputPrice');
        var stockInput = document.getElementById('inputStock');
        var descriptionInput = document.getElementById('description');
        var priceError = document.getElementById('priceError');
        var stockError = document.getElementById('stockError');
        var descriptionError = document.getElementById('descriptionError');
            // Price validation
        var priceValue = parseFloat(priceInput.value);
        if (isNaN(priceValue) || priceValue < 0) {
            priceError.textContent = 'Price must be a valid number greater than or equal to 0.';
            return false;
        } else {
            priceError.textContent = '';
        }

        // Stock validation
        var stockValue = parseInt(stockInput.value);
        if (isNaN(stockValue) || stockValue < 0) {
            stockError.textContent = 'Stock must be a valid integer greater than or equal to 0.';
            return false;
        } else {
            stockError.textContent = '';
        }
        var trimmedDescription = descriptionInput.value.trim();
        if (trimmedDescription === '') {
            descriptionError.textContent = 'Description cannot be null.';
            return false;
        } else if (/^\s+$/.test(trimmedDescription)) {
            // Check if the description contains only spaces
            descriptionError.textContent = 'Description cannot be only spaces.';
            return false;
        } else {
            descriptionError.textContent = '';
        }

        return true;
    }
</script>

{% endblock main %}